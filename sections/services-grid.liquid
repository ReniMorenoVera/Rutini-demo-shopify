{{ 'section-services-grid.css' | asset_url | stylesheet_tag }}

{%- comment -%}
Subí a Assets una imagen llamada `services-placeholder.jpg` (o cambiá el nombre aquí).
Se usará como imagen por defecto cuando el bloque no tenga imagen.
{%- endcomment -%}
{%- assign services_placeholder = 'services-placeholder.jpg' | asset_url -%}

<div class="services-grid page-width">
  <div class="services-grid__container">
    {%- for block in section.blocks -%}
      {%- assign img_url = services_placeholder -%}
      {%- if block.settings.image != blank -%}
        {%- assign img_url = block.settings.image | img_url: '1500x' -%}
      {%- endif -%}

      <div class="services-grid__item" style="--bg-image: url('{{ img_url }}');" {{ block.shopify_attributes }}>
        <a class="services-grid__link" href="{{ block.settings.link | default: '#' }}">
          <div class="services-grid__overlay">
            {%- if block.settings.title != blank -%}
              <h3 class="services-grid__title">{{ block.settings.title | escape }}</h3>
            {%- endif -%}

            <span class="services-grid__btn">{{ block.settings.button_label | default: 'Ver más' }}</span>
          </div>
        </a>
      </div>
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "Services Grid",
  "blocks": [
    {
      "type": "service",
      "name": "Service",
      "limit": 4,
      "settings": [
        { 
            "type": "text", 
            "id": "title", 
            "label": "Title", 
            "default": "Service name" 
        },
        { 
            "type": "image_picker", 
            "id": "image", 
            "label": "Image" 
        },
        { 
            "type": "url", 
            "id": "link", 
            "label": "Link" 
        },
        { 
            "type": "text", 
            "id": "button_label", 
            "label": "Button label", 
            "default": "Ver más" 
        }
      ]
    }
  ],
  "presets": [
    { "name": "Services Grid", 
        "blocks": [ 
            { "type": "service" }, 
            { "type": "service" }, 
            { "type": "service" } 
        ] 
    }
  ]
}
{% endschema %}
